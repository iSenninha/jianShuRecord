### 线程安全与锁优化

> 当多线程访问的时候，不用调用者考虑任何同步或者是锁相关的事宜，调用者都能得到正确的结果，那么就是线程安全的。



- Java中的线程安全

  1. 不可变(Immutable)

     不可变状态的成员变量一定是线程安全的，比如String的成员变量char[]数组就是final类型的，所以每次操作后对原来的对象都不会造成影响，而是返回一个新的对象给调用者。

  2. 绝对线程安全

     指的是不管并发如何操作，都能正确地执行操作，事实上，很多标注线程安全的类都不是绝对线程安全的

  3. 相对线程安全

     如Vector，相对是指即使对应方法加了锁，但是在一个线程在删除，一个线程在遍历输出的情况下，仍然可能会出现数组越界。

  4. 线程兼容

     在外部同步的帮助下，可以在并发环境下安全地使用

  5. 线程对立

     就是无论在调用端如何同步，都可能会出现问题。