### 监控系统
主要使用vmstat监控系统运行中的状态。

```
vmstat

 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 0  0 662092 155092  82320 1099996    0    2    37    94   28   47  9  4 86  2  0
 2  0 662092 158256  82320 1096616    0    0     0     0  966 3306  3  2 95  1  0
 0  0 662092 158424  82328 1096356    0    0     2     8  924 3171  2  1 96  1  0
 1  0 662092 158416  82344 1096340    0    0     0    38  935 3166  3  2 94  1  0
 0  0 662092 158432  82376 1096404    0    0     2   662  991 3323  3  2 93  3  0

   Procs
       r: 等待运行的进程数
       b: 处在非中断睡眠状态的进程数
       w: 被交换出去的可运行的进程数。
       此数由 linux 计算得出，但 linux 并不耗尽交换空间

   Memory
       swpd: 虚拟内存使用情况，单位：KB
       free: 空闲的内存，单位KB
       buff: 被用来做为缓存的内存数，单位：KB

   Swap
       si: 从磁盘交换到内存的交换页数量，单位：KB/秒
       so: 从内存交换到磁盘的交换页数量，单位：KB/秒

   IO
       bi: 发送到块设备的块数，单位：块/秒
       bo: 从块设备接收到的块数，单位：块/秒

   System
       in: 每秒的中断数，包括时钟中断
       cs: 每秒的环境（上下文）切换次数

   CPU
       按 CPU 的总使用百分比来显示
       us: CPU 使用时间
       sy: CPU 系统使用时间
       id: 闲置时间
```

#### 1.监控cpu队列
上面第一列的**r**表示的就是**等待运行的进程数**，这个值如果等于系统的**核心数**，表明系统运行正常，如果是3-4倍，则表明出现了问题。


#### 2.监控内存使用率
内存使用主要包括空闲内存的使用和swap的使用，频繁进行内存换页会导致系统卡顿。如果堆内存被置换出去，GC的时候会卡顿更长时间。