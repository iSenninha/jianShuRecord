###订阅发布模式
---

**监听者**------->**EventBus**<------**发布者**

&nbsp;

- 监听者
> 包含它感兴趣的事件，注册到EventBus。一般是实现一个统一的接口，方便通知的时候去调用方法。也可以使用委托的方式去实现。

&nbsp;

- EvnetBus
> 1.EventBus里维护着一个包含所有订阅者的**Map**，一个储存事件的**Queue**。
2.然后有一个自旋线程去不断取事件队列中的任务去处理。

&nbsp;

- 发布者
> 发布事件到EventBus，其实就是加入到储存事件的Queue中

&nbsp;

- 工作原理
当一个事件发布到EventBus的时候，它携带着事件的属性
当一个事件被处理的时候，从Map里判断哪些监听者是对这些事件感兴趣的，如果是感兴趣的事件，调用对应的监听者的监听接口取执行对应的业务。

- 优点
> 那么问题来了，这样做的好处在哪里？正如这里所说的用户场景，是订阅/发布。RSS订阅里，如果你注册了对某些主题感兴趣，然后对应主题的文章产生后就会推送给订阅者。
也可以在产生文章的时候直接发布给对应的感兴趣的订阅者，但是这样就耦合度太高了。而且在逻辑上也不够清晰。