### IP(网络层协议)

> IP层向上层应用提供
>
> **简单灵活的**，**无连接的**，**不可靠的**，**尽最大能力交付的**的数据报服务。
>
> 包含有**IP协议**，**ARP协议**，**ICMP协议**





- ARP协议(Address Resolution Protocol)

  通过ARP协议，把IP目的地址转化成对应的MAC地址，把IP数据包封装成**MAC帧**，传递给下一个节点。

- IP协议
  1. 由于数据链路层MTU(Maximum Transfer Unit)的限制，一个IP报文可能要分割成几份传输，通过IP报文头部的**标识**和**片偏移**来实现，一个IP报文在接收端的重新组装。
  2. 报文头部有生存时间**TTL**，可以防止报文在网络里来回兜圈子。
  3. 首部校验和
  4. 协议(在报文头部指明上一层使用的协议)


- ICMP(Internet Control Message Protocol)

  > ICMP允许主机或者路由报告差错传输情况或者其他的异常情况给源主机。
  >
  > ICMP是封装在IP报文中的。

  1. Ping，发送ICMP回送报文，根据往返时间获取值
  2. traceroute，设置TTL为1,2,3,然后根据返回的源主机来获取经过的路由地址。